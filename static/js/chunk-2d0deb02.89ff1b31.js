(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0deb02"],{"875b":function(e,i,t){"use strict";t.r(i);var r=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("div",{ref:"cesiumContainer",attrs:{id:"cesiumContainer"}}),t("div",{ref:"ThreeContainer"})])},s=[],n={name:"demo",components:{},data:function(){return{THREE:t("7fed"),minWGS84:[115.23,39.55],maxWGS84:[116.23,41.55],objs:[],threeMesh:null,three:{renderer:null,camera:null,scene:null},cesium:{viewer:null}}},methods:{_3DObject:function(){this.threeMesh=null,this.minWGS84=null,this.maxWGS84=null},initCesium:function(){var e=new XE.Earth(this.$refs.cesiumContainer);e.sceneTree.root={children:[{czmObject:{name:"百度地图",xbsjType:"Imagery",xbsjImageryProvider:{XbsjImageryProvider:{url:"//online1.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1",srcCoordType:"BD09",dstCoordType:"WGS84"}}}}]},this.$root.$viewer=e;var i=Cesium.Cartesian3.fromDegrees((this.minWGS84[0]+this.maxWGS84[0])/2,(this.minWGS84[1]+this.maxWGS84[1])/2-1,2e5);this.$root.$viewer.czm.viewer.camera.flyTo({destination:i,orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-60),roll:Cesium.Math.toRadians(0)},duration:3})},initThree:function(){var e=45,i=window.innerWidth,t=window.innerHeight,r=i/t,s=1,n=1e7;this.three.scene=new this.THREE.Scene,this.three.camera=new this.THREE.PerspectiveCamera(e,r,s,n),this.three.renderer=new this.THREE.WebGLRenderer({alpha:!0}),this.$refs.ThreeContainer.appendChild(this.three.renderer.domElement)},init3DObject:function(){for(var e={name:"Polygon",polygon:{hierarchy:Cesium.Cartesian3.fromDegreesArray([this.minWGS84[0],this.minWGS84[1],this.maxWGS84[0],this.minWGS84[1],this.maxWGS84[0],this.maxWGS84[1],this.minWGS84[0],this.maxWGS84[1]]),material:Cesium.Color.RED.withAlpha(.2)}},i=(this.$root.$viewer.czm.viewer.entities.add(e),new this.THREE.MeshNormalMaterial({side:this.THREE.DoubleSide})),t=10,r=[],s=0;s<t;s++)r.push(new this.THREE.Vector2(Math.sin(.2*s)*t+5,2*(s-5)));var n=new this.THREE.LatheGeometry(r),h=new this.THREE.Mesh(n,i);h.scale.set(1500,1500,1500),h.position.z+=15e3,h.rotation.x=Math.PI/2;var a=new this.THREE.Group;a.add(h),this.three.scene.add(a);var o=new this._3DObject;o.threeMesh=a,o.minWGS84=this.minWGS84,o.maxWGS84=this.maxWGS84,this.objs.push(o),n=new this.THREE.DodecahedronGeometry;var m=new this.THREE.Mesh(n,new this.THREE.MeshNormalMaterial);m.scale.set(5e3,5e3,5e3),m.position.z+=15e3,m.rotation.x=Math.PI/2;var c=new this.THREE.Group;c.add(m),this.three.scene.add(c),o=new this._3DObject,o.threeMesh=c,o.minWGS84=this.minWGS84,o.maxWGS84=this.maxWGS84,this.objs.push(o)},renderCesium:function(){this.$root.$viewer.czm.viewer.render()},renderThreeObj:function(){var e=this;this.three.camera.fov=Cesium.Math.toDegrees(this.$root.$viewer.czm.viewer.camera.frustum.fovy),this.three.camera.updateProjectionMatrix();var i=function(i){return new e.THREE.Vector3(i.x,i.y,i.z)};for(var t in this.objs){this.minWGS84=this.objs[t].minWGS84,this.maxWGS84=this.objs[t].maxWGS84;var r=Cesium.Cartesian3.fromDegrees((this.minWGS84[0]+this.maxWGS84[0])/2,(this.minWGS84[1]+this.maxWGS84[1])/2),s=Cesium.Cartesian3.fromDegrees((this.minWGS84[0]+this.maxWGS84[0])/2,(this.minWGS84[1]+this.maxWGS84[1])/2,1),n=i(Cesium.Cartesian3.fromDegrees(this.minWGS84[0],this.minWGS84[1])),h=i(Cesium.Cartesian3.fromDegrees(this.minWGS84[0],this.maxWGS84[1])),a=(new this.THREE.Vector3).subVectors(n,h).normalize();this.objs[t].threeMesh.position.copy(r),this.objs[t].threeMesh.lookAt(s),this.objs[t].threeMesh.up.copy(a)}this.three.camera.matrixAutoUpdate=!1;var o=this.$root.$viewer.czm.viewer.camera.viewMatrix,m=this.$root.$viewer.czm.viewer.camera.inverseViewMatrix;three.camera.matrixWorld.set(m[0],m[4],m[8],m[12],m[1],m[5],m[9],m[13],m[2],m[6],m[10],m[14],m[3],m[7],m[11],m[15]),this.three.camera.matrixWorldInverse.set(o[0],o[4],o[8],o[12],o[1],o[5],o[9],o[13],o[2],o[6],o[10],o[14],o[3],o[7],o[11],o[15]),this.three.camera.lookAt(new this.THREE.Vector3(0,0,0));var c=this.$refs.ThreeContainer.clientWidth,d=this.$refs.hreeContainer.clientHeight,u=c/d;this.three.camera.aspect=u,this.three.camera.updateProjectionMatrix(),this.three.renderer.setSize(c,d),this.three.renderer.render(three.scene,three.camera)},loop:function(){this.renderCesium(),this.renderThreeObj()}},mounted:function(){this.initCesium(),this.initThree(),this.init3DObject(),this.loop()}},h=n,a=t("2877"),o=Object(a["a"])(h,r,s,!1,null,null,null);i["default"]=o.exports}}]);